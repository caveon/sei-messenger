!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("SeiMessenger",[],t):"object"==typeof exports?exports.SeiMessenger=t():e.SeiMessenger=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function e(t,n){var s=this;i(this,e),this.pong=function(e){"pong"===e.data&&(s.seiWindow=e.source)},this.getSeiResponseId=function(){for(var e=window.location.search.substring(1),t=e.split("&"),n=0,i=t.length;n<i;n++){var o=t[n].split("=");if(o[0]===s.seiQueryParamName)return o[1]}return null},this.pingTargetWindow=function(e){s.numPingAttempts++,e.parent.postMessage({seiPing:!0},s.seiOrigin),s.numPingAttempts<s.maxPingAttempts&&s.pingTargetWindow(e.parent)},this.sendMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s.seiWindow.postMessage({message:e,response_id:s.responseId,meta:t},s.seiOrigin)},this.seiOrigin=t||"https://sei.caveon.com",this.seiQueryParamName="sei_response_id",this.maxPingAttempts=10,this.numPingAttempts=0,this.seiWindow=window.parent,this.responseId=n||this.getSeiResponseId(),window.addEventListener("message",this.pong),this.pingTargetWindow(window)};e.exports=s}])});